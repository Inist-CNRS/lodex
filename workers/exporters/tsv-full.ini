prepend = delegate?file=../worker.ini
mimeType = text/tab-separated-values
type = file
label = tsv-full-export

[use]
plugin = basics
plugin = lodex
plugin = analytics

[buildContext]
connectionStringURI = get('connectionStringURI')


[env]
path = from
value = get('fields').map('name')

path = to
value = get('fields').map('label')

path = resourceFields
value = get('fields').filter(f => f.scope === 'collection' || f.scope === 'document').map('name')

path = connectionStringURI
value = get('connectionStringURI')

[LodexRunQuery]

[greater]
path = total
than = 1

[filterVersions]
[filterContributions]

[injectDatasetFields?singleton]
connectionStringURI = env('connectionStringURI')

[exchange]
value = self().pick(env('resourceFields'))

[keyMapping]
from = env('from')
to = env('to')

[CSVString]
separator = fix('\t')
format = strict
