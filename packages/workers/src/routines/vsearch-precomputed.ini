prepend = delegate?file=../worker.ini
mimeType = application/json
label = Pre-calculation for vectors search

[use]
plugin = basics
plugin = lodex

[buildContext]
connectionStringURI = get('connectionStringURI')
tenant =  get('tenant')
precomputedName =  get('precomputedName')

[assign]
path = queryVector
value = get('filter.$text.$search')

[createVectorEmbeddings]
path = queryVector 

[LodexVSearchQueryPrecomputed]
valueFieldName = env('precomputedValueColumn').defaultTo('weight')
labelFieldName = env('precomputedLabelColumn').defaultTo('source')

[exchange]
value = self().omit(['origin', 'documents'])

[LodexOutput]
indent = true
extract = total

